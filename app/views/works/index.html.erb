<h3>List of works </h3>

<% work_headers = ["Votes", "Title", "Created By", "Published", "Upvote"] %>

<% if @works.count < 1 %>
  <p>
    No media yet
  </p>
<% end %>

<% albums = @works.sorted_by_votes("album")%>
<section class = "albums-table">
  <h4>Albums</h4>
  <table>
    <tr>
      <% work_headers.each do |header| %>
      <th><%= header %></th>
      <% end %>
    </tr>
    <% albums.each do |album| %>
    <tr>
      <% work_headers.each do |key| %>
      <td>
        <% if key == "Votes" %>
          <%= "#{(album.votes).count}" %>
        <% elsif key == "Title" %>
          <%= link_to "#{album.title}", work_path(album.id) %>
        <% elsif key == "Created By" %>
          <%= "#{album.creator}"%>
        <% elsif key == "Published" %>
          <%= "#{album.publication_year}" %>
        <% elsif key == "Upvote" %>
          <%= link_to "Upvote", upvote_path(album.id), method: :post, class: :button %>
        <% end %>
      </td>
      <% end %>
    </tr>
    <% end %>
  </table>
</section>

<% books= @works.sorted_by_votes("book")%>

<section class = "books-table">
  <h4>Books</h4>
  <table>
    <tr>
      <% work_headers.each do |header| %>
      <th><%= header %></th>
      <% end %>
    </tr>
    <% books.each do |book| %>
    <tr>
      <% work_headers.each do |key| %>
      <td>
        <% if key == "Votes" %>
          <%= "#{(book.votes).count}" %>
        <% elsif key == "Title" %>
          <%= link_to "#{book.title}", work_path(book.id) %>
        <% elsif key == "Created By" %>
          <%= "#{book.creator}"%>
        <% elsif key == "Published" %>
          <%= "#{book.publication_year}" %>
        <% elsif key == "Upvote" %>
          <%= link_to "Upvote", upvote_path(book.id), method: :post, class: :button %>
        <% end %>
      </td>
      <% end %>
    </tr>
    <% end %>
  </table>
</section>

<% movies = @works.sorted_by_votes("movie")%>

<section class = "movies-table">
  <h4>Movies</h4>
  <table>
    <tr>
      <% work_headers.each do |header| %>
      <th><%= header %></th>
      <% end %>
    </tr>
    <% movies.each do |movie| %>
    <tr>
      <% work_headers.each do |key| %>
      <td>
        <% if key == "Votes" %>
          <%= "#{(movie.votes).count}" %>
        <% elsif key == "Title" %>
          <%= link_to "#{movie.title}", work_path(movie.id) %>
        <% elsif key == "Created By" %>
          <%= "#{movie.creator}"%>
        <% elsif key == "Published" %>
          <%= "#{movie.publication_year}" %>
        <% elsif key == "Upvote" %>
          <%= link_to "Upvote", upvote_path(movie.id), method: :post, class: :button %>
        <% end %>
      </td>
      <% end %>
    </tr>
    <% end %>
  </table>

</section>
