<h3>List of works </h3>

<!-- TODO: What to display when there are none of that sub-category -->

<% work_headers = ["Votes", "Title", "Created By", "Published", "Upvote"] %>

<% if @works.count < 1 %>
  <p>
    No media yet
  </p>
<% end %>

<% albums = (@works.where(category: "album")).order(:id)%>
<section class = "albums-table">
  <h4>Albums</h4>
  <table>
    <tr>
      <% work_headers.each do |header| %>
      <th><%= header %></th>
      <% end %>
    </tr>
    <% albums.each do |album| %>
    <tr>
      <% work_headers.each do |key| %>
      <td>
        <% if key == "Votes" %>
          <%= "#{(album.votes).count}" %>
        <% elsif key == "Title" %>
          <%= link_to "#{album.title}", work_path(album.id) %>
        <% elsif key == "Created By" %>
          <%= "#{album.creator}"%>
        <% elsif key == "Published" %>
          <%= "#{album.publication_year}" %>
        <% elsif key == "Upvote" %>
          <%= link_to "Upvote", upvote_path(album.id), method: :post %>
        <% end %>
      </td>
      <% end %>
    </tr>
    <% end %>
  </table>
</section>

<% books = (@works.where(category: "book")).order(:id)%>

<section class = "books-table">
  <h4>Books</h4>
  <table>
    <tr>
      <% work_headers.each do |header| %>
      <th><%= header %></th>
      <% end %>
    </tr>
    <% books.each do |book| %>
    <tr>
      <% work_headers.each do |key| %>
      <td>
        <% if key == "Votes" %>
          <%= "#{(book.votes).count}" %>
        <% elsif key == "Title" %>
          <%= link_to "#{book.title}", work_path(book.id) %>
        <% elsif key == "Created By" %>
          <%= "#{book.creator}"%>
        <% elsif key == "Published" %>
          <%= "#{book.publication_year}" %>
        <% elsif key == "Upvote" %>
          <%= link_to "Upvote", upvote_path(book.id), method: :post %>
        <% end %>
      </td>
      <% end %>
    </tr>
    <% end %>
  </table>
</section>

<% movies = (@works.where(category: "movie")).order(:id)%>

<section class = "movies-table">
  <h4>Movies</h4>
  <table>
    <tr>
      <% work_headers.each do |header| %>
      <th><%= header %></th>
      <% end %>
    </tr>
    <% movies.each do |movie| %>
    <tr>
      <% work_headers.each do |key| %>
      <td>
        <% if key == "Votes" %>
          <%= "#{(movie.votes).count}" %>
        <% elsif key == "Title" %>
          <%= link_to "#{movie.title}", work_path(movie.id) %>
        <% elsif key == "Created By" %>
          <%= "#{movie.creator}"%>
        <% elsif key == "Published" %>
          <%= "#{movie.publication_year}" %>
        <% elsif key == "Upvote" %>
          <%= link_to "Upvote", upvote_path(movie.id), method: :post %>
        <% end %>
      </td>
      <% end %>
    </tr>
    <% end %>
  </table>

</section>


<!-- <ul>
  <% @works.each do |work|%>
  <li>
    <%= "#{work.title}, #{work.creator}, #{work.category}" %>
  </li>
  <%end %>
</ul> -->
